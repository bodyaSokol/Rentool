<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/media.css">
    <title>Оформление заказа</title>
    <link rel="shortcut icon" type="image/png" href="img/favicon.ico"/>
    <meta name="robots" content="none" />
</head>
<body>
    <div class="nav-main">
        <div class="content_line">
            <div class="nav">
                <div class="logo">
                    <a href="index.html"><img src="img/Logo.png" alt="rentool"></a>
                </div>
                <div class="call_us_wrap"><span>Позвони нам </span><a class="call_us" href="tel:+7 (961) 273-93-23">7 (961) 273-93-23</a></div> 
                <div>
                <div  class="write_us_wrap">
                    <div class="write_us">
                        <span>Напиши нам<br></span>
                        <a class="email" href="email:rentool61@mail.ru">rentool61@mail.ru</a>
                    </div>
                    <div class="bucket_wrap">
                        <img src="img/bucket.png" alt="">
                        <div class="bucket_length">0</div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
    <div class="content_line">
        <div class="search" style="display:none;">
            <input class="search_input" type="text" placeholder="Поиск по каталогу товаров">
            <button class="search_button">Поиск</button>
        </div> 
        <h1>Подтверждение заказа</h1>
        <div class="order_type">
            <div class="order_type_item">К оплате: <div class="order_type_price">9000₽</div></div>
            <div class="order_type_item">Самовывоз: <div class="custom_checkbox checked" id="checkbox1"></div></div>
            <div class="order_type_item">Доставка: <div class="custom_checkbox" id="checkbox2"></div></div>
            <div class="order_type_item delivery_details" style="color:#8C8C8C;display:none;">*стоимость доставки уточняется при звонке с менеджером</div>
        </div>
        <form action="handler.php">
            <input class="bucket_input" type="text" name="name" placeholder="Имя" id="name_input" required>
            <input class="bucket_input" type="text" name="phone" placeholder="Телефон (79612739323)" id="phone_input" required>
            <input class="bucket_input bucket_input_address" type="text" name="address" placeholder="Адрес для доставки" style="display:none">
            <input class="dispnone request_type" type="text" name="request_type" value="bucket_request">
            <input class="dispnone request_type" id="sended_text_to_php" type="text" name="sended_text" value="Корзина">
            <input class="yellow_button yellow_button_bucket" type="submit" value="Отправить номер" >
            <p>Нажимая кнопку "Отправить номер" подтверждаю, что я ознкомился c <a href="law/processing_of_personal_data.html" style="color:blue;text-decoration: underline;">Положением об обработке персональных данных</a>, и подтверждает согласие с документом <a href="law/consent_to_the_processing_of_personal_data.html" style="color:blue;text-decoration: underline;">Согласия на обработку персональных данных</a>.</p>
            <br>
            <p>В случае самовывоза вы приезжаете к нам на склад с паспортом и заключаете с нами <a href="law/contract.html"  style="color:blue;text-decoration: underline;">договор аренды</a>. Мы находимся на пер. Знатный, 33. В случае Доставки оборудования вы указываете свой адрес на сайте либо при консультации с менеджером, доставщик привозит вам оборудование и вместе с ним вы заключаете договор аренды."</p>
        </form>
    </div>
    <div class="footer">
        <div class="content_line">
            <div class="footer_list">
                <div class="footer_item footer_item_flex">
                    <img src="img/logo2.png" alt="">
                    <a class="yellow_phone" href="tel:+7 (961) 273-93-23">7 (961) 273-93-23</a>
                    <a class="email" href="email:rentool61@mail.ru">rentool61@mail.ru</a>
                    <button href="#" class="get_instrument" id="order_call">Заказать звонок</button>
                    <a href="https://api.whatsapp.com/send?phone=79612739323" class="whats_app_call"><img src="img/whatsapp-messenger.png" alt="">Звонок на Whats'app</a>
                </div>
                <!-- <div class="footer_item">
                    <a href="#" class="footer_category">Электроинструменты:</a>
                    <ul>
                        <li><a href="#" class="footer_subcategory">- Отбойный молоток</a></li>
                    </ul>
                </div> -->
            </div>
            <div class="footer_bottom_list">
                <div class="footer_item footer_item_docs">
                    <a href="law/processing_of_personal_data.html">Пользовательское соглашение</a>
                </div>
                <div class="footer_item footer_item_docs">
                    <a href="law/consent_to_the_processing_of_personal_data.html">Соглашение на обработку данных</a>
                </div>
                <div class="footer_item footer_item_docs footer_item_docs_last">
                    <p>“Rentool” 2021 / © Все права защищены!</p>
                </div>
            </div>
        </div>
    </div>
    <div class="modal_order_call">
        <form class="modal_rent_product" action="handler.php">
            <div id="buttonxphone">x</div>
            <h2>Заказать обратный звонок</h2>
            <input class="phone_input" type="text" name="phone" placeholder="Телефон (79612739323)" required>
            <input class="dispnone request_type" type="text" name="request_type" value="phone_request">
            <input class="phone_submit" type="submit" value="Отправить номер">
            <p>Нажимая кнопку "Отправить номер" подтверждаю, что я ознкомился c <a href="law/processing_of_personal_data.html">Положением об обработке персональных данных</a>, и подтверждает согласие с документом <a href="law/consent_to_the_processing_of_personal_data.html">Согласия на обработку персональных данных</a>.</p>
        </form>
    </div>
    <div class="modal_bucket_list">
        <div class="bucket_list_wrap">
            <img class="bucket_list_wrap_close" src="img/close_button.png">
            <h2>Корзина</h2>
            <div class="bucket_list">
                
            </div>
            <div class="bucket_result">
                 <p>Итого: <span class="bucket_price">80 000</span>₽</p>
                 <a class="yellow_button" id="final_price_button" href="#">Оформить заказ</a>
            </div>
        </div>
    </div>
    <script src="js/jquery.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script>
        var result_price=document.querySelector(".bucket_price").textContent;
        document.querySelector(".order_type_price").innerHTML=result_price;

        document.querySelector("#checkbox1").addEventListener("click",function(){
            document.getElementById("checkbox1").classList.add('checked');
            document.getElementById("checkbox2").classList.remove('checked');
            document.querySelector(".delivery_details").style.display="none";
            document.querySelector(".bucket_input_address").style.display="none";
            document.querySelector(".bucket_input_address").value="Без доставки";
        })
        document.querySelector("#checkbox2").addEventListener("click",function(){
            document.getElementById("checkbox1").classList.remove('checked');
            document.getElementById("checkbox2").classList.add('checked');
            document.querySelector(".delivery_details").style.display="flex";
            document.querySelector(".bucket_input_address").style.display="block";
            document.querySelector(".bucket_input_address").value="";
        })

        let data = JSON.parse(localStorage.getItem('categories'));
        if(data==null){
            $.get(`${api_url}/categories`, function(saved_data) {
                console.log(saved_data);
                localStorage.setItem('categories', JSON.stringify(saved_data));
                data=saved_data;
            });
        }
        let categories = data.filter(item => item.rootCategory==null);
        categories.forEach((item)=>{
            var footer_item=document.createElement('div');
            footer_item.className='footer_item';
            document.querySelector('.footer_list').appendChild(footer_item);
            //next
            var footer_category=document.createElement('a');
                footer_category.className='footer_category';
                footer_category.href=`subcategory.html#${item.id}`;
                footer_category.innerHTML=item.name;
                footer_item.appendChild(footer_category);
                // next
                var footer_ul=document.createElement('ul');
                footer_item.appendChild(footer_ul);
                // next
                    let subcategories=data.filter(item2 => item2.rootCategory!=null);
                    subcategories = subcategories.filter(item2 => item2.rootCategory.id==item.id)
                    subcategories.forEach((subitem)=>{
                        var subcategory_li=document.createElement('li');
                        var footer_subcategory=document.createElement('a');
                    footer_subcategory.className='footer_subcategory';
                    footer_subcategory.href=`products_list.html#${subitem.id}`;
                    footer_subcategory.innerHTML=`- ${subitem.name}`;
                    footer_ul.appendChild(subcategory_li);
                    subcategory_li.appendChild(footer_subcategory);
                    })
        });
    </script>
</body>
</html>